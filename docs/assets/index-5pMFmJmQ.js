(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();window.onload=()=>{const e=document.getElementById("apply"),t=document.getElementById("ex1"),r=document.getElementById("ex2"),s=document.getElementById("ex3");e.onclick=h,t.onclick=S,r.onclick=L,s.onclick=v};function h(){y(["barren","barren-res","unreachable","unreachable-res"]);const e=O(),t=A(e),r=B(t);m(r,"barren-res",1);const s=b(r);m(s,"unreachable-res",2)}function y(e){e.forEach(t=>{const r=document.getElementById(t);r.innerHTML=""})}function m(e,t,r){const s=document.getElementById(t),n=document.createElement("span");n.innerHTML=`P${r===1?"'":"''"}:`,s.appendChild(n),Object.entries(e).forEach(([o,i])=>{let c="";i.forEach((u,f)=>{c+=u,f+1<i.length&&(c+=" | ")});let a=`${o} → ${c}`;const l=document.createElement("div");l.innerHTML=a,s.appendChild(l)})}function d(e,t,r){const s=Array.from(e);let n=`y<sub>${t}</sub> = `;s.length===0?n+="ø":(n+="{",s.forEach((c,a)=>{n+=a+1<s.length?`${c}, `:`${c}}`}));const o=document.createElement("div");o.innerHTML=n,document.getElementById(r).appendChild(o)}function b(e){const t=new Set;t.add("S");let r=!0,s=0;for(d(t,s,"unreachable");r;){const o=t.size;Array.from(t).forEach(c=>{if(p(c)){const a=e[c];a&&a.forEach(l=>{l.match(/\\?.|./g).forEach(f=>{t.add(f)})})}}),r=t.size>o,d(t,++s,"unreachable")}return Object.fromEntries(Object.entries(e).filter(([o])=>t.has(o)))}function B(e){const t=new Set;let r=!0,s=0;for(d(t,s,"barren");r;){const o=t.size;Object.entries(e).forEach(([i,c])=>{c.some(l=>l.split("").every(u=>C(u)||t.has(u)))&&t.add(i)}),r=t.size>o,s++,d(t,s,"barren")}const n=Object.fromEntries(Object.entries(e).filter(([o])=>t.has(o)));return E(n,t),n}function E(e,t){for(let r of Object.keys(e))e[r]=e[r].filter(s=>!s.split("").some(n=>p(n)&&!t.has(n)))}function g(e){return e.toLowerCase()!==e.toUpperCase()}function C(e){return e.toLowerCase()===e}function p(e){return e.toUpperCase()===e&&g(e)}function A(e){const t=I(e),r={};return t.forEach(s=>{let[n,o]=s.split("->");o=o.split("|"),r[n]=o}),r}function I(e){let t=e.split(`
`);return t=t.map(r=>r.replaceAll(" ","")),t=t.filter(r=>!!r),t}function O(){return document.getElementById("input").value}function S(){const e=document.getElementById("input");e.value=`S -> Ab|Bb
A -> ab|+B|@C
B -> *C
C -> BA|Cb`}function L(){const e=document.getElementById("input");e.value=`S -> CCcC|AA
A -> EC|cc|a
B -> BC|BaB|a
C -> bb|a|c
E -> a`}function v(){const e=document.getElementById("input");e.value=`S -> A|0B1
A -> 1C|000|\\e
B -> BC|1B0 
C -> CDF|\\e
D -> A0|B1|1C`}
